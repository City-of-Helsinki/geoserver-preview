extends ../index

block layerlist
    if ((typeof layerData) !== "undefined") && (layerData.length != 0)
        div.row-fluid
            table
                tr
                    th Namespace:Name
                    th Type
                    th CRS
                    th Opacity
                    th Show
                    th Download
                
                for layer, index in layerData
                    tr
                        
                        if layer['status'] != 'OK'
                            td(data-name=layer['name'], class='tdName')= layer['name']
                            td Not found!
                            td Not found!
                            td Not found!
                            td Not found!
                            td Not found!
                        else
                            td(data-name=layer['name'], data-namespace=layer['namespace'], class='tdName')= layer['namespace'] + ':' + layer['name']
                            td(data-type=layer['type'], class='tdType')= layer['type']
                            td(data-srs=layer['srs'], data-bbox=layer['nativeBoundingBox']['minx']+','+layer['nativeBoundingBox']['miny']+','+layer['nativeBoundingBox']['maxx']+','+layer['nativeBoundingBox']['maxy'])= layer['srs']
                            td(id="opacity")
                                input(type="number", min="0", max="100", value="80", label="opacity")
                            td
                                button(label="show on map", id=layer['name'], class='layerToggle do-show') Show
                            td
                                select(onchange=layer['downloadLinkScript'])
                                    option Select one
                                    optgroup(label="WMS")
                                        for opt, label in wms_formats
                                            option(value=opt)= label
                                    if layer['type'] == 'vector'
                                        optgroup(label="WFS")
                                            for opt, label in wfs_formats
                                                option(value=opt)= label
    else
        p No layers found, but this might be a problem with connecting to Geoserver
